{% extends 'base.html' %}
{% load static %}

{% block title %}{{ service.title }} - Service Details{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/service_detail.css' %}">
{% endblock %}

{% block content %}
<div class="detail-container">
    <div class="detail-card">
        {% if service.image %}
        <div class="image-box">
            <img src="{{ service.image.url }}" alt="Service Image">
        </div>
        {% endif %}

        <div class="info-box">
            <h2>{{ service.title }}</h2>
            <p class="category">ğŸ“ <strong>Category:</strong> {{ service.display_category }}</p>
            <p class="description">{{ service.description }}</p>

            <ul class="meta-info">
                <li><strong>ğŸ“ Area:</strong> {{ service.verified_location }}</li>
                {% if service.job_type == 'one_time' %}
                    <li><strong>ğŸ“… Date:</strong> {{ service.job_date }}</li>
                {% else %}
                    <li><strong>ğŸ“… Days:</strong> {{ service.get_available_days_display }}</li>
                {% endif %}
                <li><strong>â° Time:</strong> {{ service.from_time }} â€“ {{ service.to_time }}</li>
                <li><strong>ğŸ’° Rate:</strong> â‚¹{{ service.rate }} ({{ service.get_rate_type_display }})</li>
                <li><strong>ğŸ’³ Payments:</strong> {{ service.get_accepted_payments_display }}</li>
                <li><strong>â˜ Contact:</strong> {{ service.contact_phone }} | {{ service.contact_email }}</li>
                <li><strong>ğŸ“– Requirements:</strong> {{ service.requirements }}</li>
                <li><strong>â›” Cancellation Policy:</strong> {{ service.get_cancellation_policy_display }}</li>
            </ul>

            <div class="action-buttons">
                {% if service.certification %}
                    <a href="{{ service.certification.url }}" target="_blank" class="cert-btn">ğŸ“„ View Certification</a>
                {% endif %}

                {% if user.is_authenticated and user.role == 'customer' %}
                    <a href="{% url 'create_booking' service.id %}" class="book-btn">ğŸ—“ï¸ Book this Service</a>
                    <a href="{% url 'conversation' service.provider.user.id %}" class="msg-btn">ğŸ’¬ Message Provider</a>
                {% else %}
                    <a href="{% url 'login' %}" class="book-btn" style="background-color: #6c757d;">ğŸ” Login to Book</a>
                {% endif %}
            </div>

            <!-- Link to Provider Profile -->
            <div class="provider-info">
                <p>ğŸ‘¨â€ğŸ”§ View Provider:
                    <a href="{% url 'public_provider_profile' %}?id={{ service.provider.user.id }}">
                        {{ service.provider.user.username }}
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

